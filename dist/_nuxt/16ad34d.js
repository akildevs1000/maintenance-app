(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{690:function(e,r,n){"use strict";n.r(r);var t=n(131),o=n(40),c=(n(120),n(5),n(39),n(47),n(686),n(400),{layout:"login",data:function(){return{isRecording:!1,mediaRecorder:null,audioChunks:[],recordedBlob:null,audioUrl:null}},methods:{blobToBase64:function(e){return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,n){var t=new FileReader;t.onloadend=function(){return r(t.result)},t.onerror=n,t.readAsDataURL(e)})));case 1:case"end":return r.stop()}}),r)})))()},startRecording:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.recordedBlob=null,r.prev=1,r.next=4,navigator.mediaDevices.getUserMedia({audio:!0});case 4:n=r.sent,e.mediaRecorder=new MediaRecorder(n),e.mediaRecorder.start(),e.isRecording=!0,e.audioChunks=[],e.mediaRecorder.addEventListener("dataavailable",(function(r){e.audioChunks.push(r.data)})),e.mediaRecorder.addEventListener("stop",Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.recordedBlob=new Blob(e.audioChunks,{type:"audio/mpeg"}),e.audioUrl=URL.createObjectURL(e.recordedBlob),r.t0=e,r.next=5,e.blobToBase64(e.recordedBlob);case 5:r.t1=r.sent,r.t0.$emit.call(r.t0,"voice-note",r.t1);case 7:case"end":return r.stop()}}),r)})))),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(1),console.error("Error accessing the microphone",r.t0);case 16:case"end":return r.stop()}}),r,null,[[1,13]])})))()},stopRecording:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.mediaRecorder&&(e.mediaRecorder.stop(),e.isRecording=!1);case 1:case"end":return r.stop()}}),r)})))()},playRecording:function(){var e=this.$refs.audioPlayer;e&&this.audioUrl&&e.play()}}}),d=n(91),component=Object(d.a)(c,(function(){var e=this,r=e._self._c;return r("span",[r("style",[e._v("\n    @keyframes pulse {\n      0% {\n        /* transform: scale(1); */\n        box-shadow: 0 0 0 0 rgba(33, 150, 243, 0.7);\n      }\n      70% {\n        /* transform: scale(1.2); */\n        box-shadow: 0 0 0 7px rgba(33, 150, 243, 0);\n      }\n      100% {\n        /* transform: scale(1); */\n        box-shadow: 0 0 0 0 rgba(33, 150, 243, 0);\n      }\n    }\n\n    .recording-active {\n      border-radius: 50px;\n      animation: pulse 1s infinite;\n    }\n\n     {\n    }\n  ")]),e._v(" "),e.isRecording?e._e():r(t.a,{attrs:{small:"",color:"primary"},on:{click:e.startRecording}},[e._v("mdi-microphone-outline")]),e._v(" "),e.isRecording?r(t.a,{class:"".concat(e.isRecording?"recording-active":""),attrs:{small:"",color:"primary"},on:{click:e.stopRecording}},[e._v("mdi-microphone-outline")]):e._e(),e._v(" "),e.recordedBlob?r(t.a,{attrs:{small:"",color:"success"},on:{click:e.playRecording}},[e._v("mdi-play-circle-outline")]):e._e(),e._v(" "),r("audio",{ref:"audioPlayer",staticStyle:{display:"none"},attrs:{src:e.audioUrl,controls:""}})],1)}),[],!1,null,null,null);r.default=component.exports}}]);